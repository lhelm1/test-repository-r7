{"data":{"graph":{"edges":[{"edgeId":"0243a694-9c34-457a-b0f3-92540d476252","fromNodeId":"e49e1647-c604-47d6-8308-2e601b8b0988","name":"Labeled","toNodeId":"b0330655-137c-4333-acfc-c2beb5de74d3"},{"edgeId":"0a650483-4a46-4d0d-876b-4c5bc8e9838d","fromNodeId":"e49e1647-c604-47d6-8308-2e601b8b0988","name":"Review Requested","toNodeId":"da86abf8-3eed-4684-907d-71a60969bbca"},{"edgeId":"1cfbdca6-f97c-4222-8f86-a153eaabb7d3","fromNodeId":"13763dee-c6fa-4237-9b32-74c212075854","toNodeId":"d3a88ebf-39f8-44d7-8acb-3eee604ec8f6"},{"edgeId":"30633343-869c-4d91-a3a4-daf31a222042","fromNodeId":"da86abf8-3eed-4684-907d-71a60969bbca"},{"edgeId":"3bd37e5b-07d6-46c0-9805-7802efe140d5","fromNodeId":"073c618b-b4d8-4393-956a-34d875b4ac3b"},{"edgeId":"3c2598b6-1e5f-4db8-b308-162d3f0a1454","fromNodeId":"e49e1647-c604-47d6-8308-2e601b8b0988","name":"Open","toNodeId":"f3d796e1-dddc-433a-9cc6-f0923935bb09"},{"edgeId":"4dac4ee4-0c50-4fa1-827b-3f951a835ed3","fromNodeId":"14e66cbb-67b8-4c67-8f2a-459be1681bd4"},{"edgeId":"5774dc84-770e-4b58-9be7-c309538fcf74","fromNodeId":"cac18b4a-ad98-40f9-b2dd-27f8f49cda28","toNodeId":"e49e1647-c604-47d6-8308-2e601b8b0988"},{"edgeId":"8528e117-892a-4995-902b-521ebc4d34f3","fromNodeId":"d3a88ebf-39f8-44d7-8acb-3eee604ec8f6","toNodeId":"cac18b4a-ad98-40f9-b2dd-27f8f49cda28"},{"edgeId":"8e2ef27e-e1dd-4a67-9524-771a47c0a4b9","fromNodeId":"e49e1647-c604-47d6-8308-2e601b8b0988","name":"Closed","toNodeId":"57442df7-9ff9-4488-8b34-4703a0c92fa0"},{"edgeId":"968340bc-848d-4eee-85ab-4e3f10f0a3ab","fromNodeId":"f3d796e1-dddc-433a-9cc6-f0923935bb09"},{"edgeId":"bebb05c5-dff8-41b7-aebc-6290d993b8a7","fromNodeId":"b0330655-137c-4333-acfc-c2beb5de74d3","toNodeId":"073c618b-b4d8-4393-956a-34d875b4ac3b"},{"edgeId":"cbdbcbf2-aff9-49f6-8c42-2a01bd51761b","fromNodeId":"e49e1647-c604-47d6-8308-2e601b8b0988","name":"Merged","toNodeId":"14e66cbb-67b8-4c67-8f2a-459be1681bd4"},{"edgeId":"cc71215d-78c3-4132-83c5-ac650e6d0785","fromNodeId":"e49e1647-c604-47d6-8308-2e601b8b0988","name":"Other"},{"edgeId":"e93f88a5-7b57-4676-b559-327641454f80","fromNodeId":"57442df7-9ff9-4488-8b34-4703a0c92fa0"}],"nodes":[{"nodeId":"073c618b-b4d8-4393-956a-34d875b4ac3b"},{"nodeId":"13763dee-c6fa-4237-9b32-74c212075854"},{"nodeId":"14e66cbb-67b8-4c67-8f2a-459be1681bd4"},{"nodeId":"57442df7-9ff9-4488-8b34-4703a0c92fa0"},{"nodeId":"b0330655-137c-4333-acfc-c2beb5de74d3"},{"nodeId":"cac18b4a-ad98-40f9-b2dd-27f8f49cda28"},{"nodeId":"d3a88ebf-39f8-44d7-8acb-3eee604ec8f6"},{"nodeId":"da86abf8-3eed-4684-907d-71a60969bbca"},{"nodeId":"e49e1647-c604-47d6-8308-2e601b8b0988"},{"nodeId":"f3d796e1-dddc-433a-9cc6-f0923935bb09"}]},"name":"Github Pull Request Events to Slack","notes":"","steps":[{"metadata":{"appName":"slack","chatOpsConnectionId":"75148d45-ae7b-4f9d-9708-f743fed2eff9","continueOnFailure":false,"identifier":"post_message","isDisabled":false,"parameters":{"input":{"attachments":[],"message":"@here We need :eyes: on {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[title]}}\nURL: {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[html_url]}}","recipient":"#komand-test"}}},"name":"Post Review Label Message","nodeId":"073c618b-b4d8-4393-956a-34d875b4ac3b","type":"action_chatops"},{"metadata":{"customOutputSchema":{"definitions":{"label":{"properties":{"name":{"type":"string"}},"type":"object"},"pull_request":{"properties":{"html_url":{"type":"string"},"merged":{"type":"boolean"},"merged_at":{"type":"string"},"state":{"type":"string"},"title":{"type":"string"},"user":{"$ref":"#/definitions/user"}},"type":"object"},"requested_reviewer":{"properties":{"login":{"type":"string"}},"type":"object"},"user":{"properties":{"login":{"type":"string"}},"type":"object"}},"properties":{"action":{"type":"string"},"label":{"$ref":"#/definitions/label"},"number":{"type":"integer"},"pull_request":{"$ref":"#/definitions/pull_request"},"requested_reviewer":{"$ref":"#/definitions/requested_reviewer"}},"type":"object"}},"name":"Github Pull Request Webhook","nodeId":"13763dee-c6fa-4237-9b32-74c212075854","type":"trigger_api"},{"metadata":{"appName":"slack","chatOpsConnectionId":"75148d45-ae7b-4f9d-9708-f743fed2eff9","continueOnFailure":false,"identifier":"post_message","isDisabled":false,"parameters":{"input":{"attachments":[],"message":":mergd: Merged PR *{{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[title]}}* by @{{[cac18b4a-ad98-40f9-b2dd-27f8f49cda28].[pr_slack_user]}}\n\n{{#equal [Github Pull Request Webhook].[pull_request].[user].[login] \"jschipp-r7\"}}\nSmashing PR's in the gym :weight_lifter: and merging :mergd: them at work.\n{{/equal}}\nURL: {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[html_url]}}\nTime: {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[merged_at]}}\n:komand: :fire: :fire: :fire: :komand:","recipient":"#komand-test"}}},"name":"Post Merged Message","nodeId":"14e66cbb-67b8-4c67-8f2a-459be1681bd4","type":"action_chatops"},{"metadata":{"appName":"slack","chatOpsConnectionId":"75148d45-ae7b-4f9d-9708-f743fed2eff9","continueOnFailure":false,"identifier":"post_message","isDisabled":false,"parameters":{"input":{"attachments":[],"message":":door: Closed PR *{{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[title]}}* by @{{[cac18b4a-ad98-40f9-b2dd-27f8f49cda28].[pr_slack_user]}}\n\nURL: {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[html_url]}}","recipient":"#komand-test"}}},"name":"Post Closed Message","nodeId":"57442df7-9ff9-4488-8b34-4703a0c92fa0","type":"action_chatops"},{"metadata":{"isDisabled":false,"parameters":{"stepControlParam":{"edgeId":"bebb05c5-dff8-41b7-aebc-6290d993b8a7","expression":{"left":{"name":"13763dee-c6fa-4237-9b32-74c212075854.label.name","type":"variable"},"op":"contains","right":{"type":"literal","value":"reviewer"},"type":"binary"},"expressionText":"({{[13763dee-c6fa-4237-9b32-74c212075854].[label].[name]}} contains \"reviewer\")"},"stopOnMatch":false}},"name":"Check Label","nodeId":"b0330655-137c-4333-acfc-c2beb5de74d3","type":"filter"},{"metadata":{"continueOnFailure":false,"customOutputSchema":{"definitions":{},"properties":{"pr_slack_user":{"description":"Sample output result1 (delete or edit)","order":1,"title":"Result1","type":"string"},"review_slack_user":{"description":"Sample output result2 (delete or edit)","order":2,"title":"Result2","type":"string"}},"title":"Variables","type":"object"},"identifier":"run","isCloud":false,"isDisabled":false,"orchestratorId":"cb53cce3-61c8-468d-9dd5-f3ba0f08f05e","parameters":{"input":{"function":"def run(params={}):\n    pr_slack_user = params.get('pr_github_user').rstrip('-r7')\n    review_slack_user = params.get('review_github_user').rstrip('-r7')\n    return { \"pr_slack_user\": pr_slack_user, \"review_slack_user\": review_slack_user }","input":{"pr_github_user":"{{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[user].[login]}}","review_github_user":"{{[13763dee-c6fa-4237-9b32-74c212075854].[requested_reviewer].[login]}}"}}},"plugin":{"name":"python_2_script","vendor":"rapid7","version":"2.0.3"}},"name":"Strip -R7 from Github User","nodeId":"cac18b4a-ad98-40f9-b2dd-27f8f49cda28","type":"action"},{"metadata":{"isDisabled":false,"parameters":{"input":{"content":"Action: {{[13763dee-c6fa-4237-9b32-74c212075854].[action]}}\nNumber: {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[title]}}\nUrl:{{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[html_url]}}\nTitle: {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[title]}}\nState: {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[state]}}\nMerged At: {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[merged_at]}}\nBy: {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[user].[login]}}"},"type":"markdown"}},"name":"Pull Request Summary","nodeId":"d3a88ebf-39f8-44d7-8acb-3eee604ec8f6","type":"artifact"},{"metadata":{"appName":"slack","chatOpsConnectionId":"75148d45-ae7b-4f9d-9708-f743fed2eff9","continueOnFailure":false,"identifier":"post_message","isDisabled":false,"parameters":{"input":{"attachments":[],"message":":eyes: @{{[cac18b4a-ad98-40f9-b2dd-27f8f49cda28].[pr_slack_user]}} your review has been requested on {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[title]}}","recipient":"#komand-test"}}},"name":"Post Review Request Message","nodeId":"da86abf8-3eed-4684-907d-71a60969bbca","type":"action_chatops"},{"metadata":{"parameters":{"defaultEdgeId":"cc71215d-78c3-4132-83c5-ac650e6d0785","stepControlParams":[{"edgeId":"8e2ef27e-e1dd-4a67-9524-771a47c0a4b9","expression":{"left":{"left":{"name":"13763dee-c6fa-4237-9b32-74c212075854.action","type":"variable"},"op":"=","right":{"type":"literal","value":"closed"},"type":"binary"},"op":"AND","right":{"left":{"name":"13763dee-c6fa-4237-9b32-74c212075854.pull_request.merged","type":"variable"},"op":"=","right":{"type":"literal","value":false},"type":"binary"},"type":"binary"},"expressionText":"({{[13763dee-c6fa-4237-9b32-74c212075854].[action]}} = \"closed\" AND {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[merged]}} = false)"},{"edgeId":"3c2598b6-1e5f-4db8-b308-162d3f0a1454","expression":{"left":{"name":"13763dee-c6fa-4237-9b32-74c212075854.action","type":"variable"},"op":"=","right":{"type":"literal","value":"opened"},"type":"binary"},"expressionText":"({{[13763dee-c6fa-4237-9b32-74c212075854].[action]}} =\"opened\"\n)"},{"edgeId":"cbdbcbf2-aff9-49f6-8c42-2a01bd51761b","expression":{"left":{"left":{"name":"13763dee-c6fa-4237-9b32-74c212075854.action","type":"variable"},"op":"=","right":{"type":"literal","value":"closed"},"type":"binary"},"op":"AND","right":{"left":{"name":"13763dee-c6fa-4237-9b32-74c212075854.pull_request.merged","type":"variable"},"op":"=","right":{"type":"literal","value":true},"type":"binary"},"type":"binary"},"expressionText":"({{[13763dee-c6fa-4237-9b32-74c212075854].[action]}} = \"closed\" AND {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[merged]}} = true)"},{"edgeId":"cc71215d-78c3-4132-83c5-ac650e6d0785","expression":{},"expressionText":""},{"edgeId":"0a650483-4a46-4d0d-876b-4c5bc8e9838d","expression":{"left":{"name":"13763dee-c6fa-4237-9b32-74c212075854.action","type":"variable"},"op":"=","right":{"type":"literal","value":"review_requested"},"type":"binary"},"expressionText":"({{[13763dee-c6fa-4237-9b32-74c212075854].[action]}} = \"review_requested\")"},{"edgeId":"0243a694-9c34-457a-b0f3-92540d476252","expression":{"left":{"name":"13763dee-c6fa-4237-9b32-74c212075854.action","type":"variable"},"op":"=","right":{"type":"literal","value":"labeled"},"type":"binary"},"expressionText":"({{[13763dee-c6fa-4237-9b32-74c212075854].[action]}} = \"labeled\")"}]}},"name":"Action Type","nodeId":"e49e1647-c604-47d6-8308-2e601b8b0988","type":"automated_decision"},{"metadata":{"appName":"slack","chatOpsConnectionId":"75148d45-ae7b-4f9d-9708-f743fed2eff9","continueOnFailure":false,"identifier":"post_message","isDisabled":false,"parameters":{"input":{"attachments":[],"message":":pullrequest: New PR *{{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[title]}}* by @{{[cac18b4a-ad98-40f9-b2dd-27f8f49cda28].[pr_slack_user]}}\n\nURL: {{[13763dee-c6fa-4237-9b32-74c212075854].[pull_request].[html_url]}}\n\nNice, now let's get that PR assessment up! :percy: :eyes:","recipient":"#komand-test"}}},"name":"Post Open Message","nodeId":"f3d796e1-dddc-433a-9cc6-f0923935bb09","type":"action_chatops"}],"summary":"","tags":[],"timeSavingsDisplayUnit":"minutes","timeSavingsSeconds":3000}}