{"data":{"graph":{"edges":[{"edgeId":"0cdf1764-fccf-41d2-9a1a-5fcb5f027133","fromNodeId":"4893962c-ddc7-471f-8eb1-4219323e4d3c","name":"No","toNodeId":"be346a30-e38f-4c82-a443-f6e536ad666c"},{"edgeId":"28cbbbd7-e544-40b7-8563-91a89ede7333","fromNodeId":"be346a30-e38f-4c82-a443-f6e536ad666c","toNodeId":"28d9a19d-6d01-40a3-b2a9-41203c4cd12b"},{"edgeId":"2caf77b7-209a-403f-a6b6-4cb5c2671273","fromNodeId":"755e3ace-d998-492e-958b-75bc33c5d153"},{"edgeId":"302261b9-e4d1-41a7-8fe9-f5e9bd93c6e9","fromNodeId":"7a0d59db-0e73-4ad7-bee5-64f5e31b098f","toNodeId":"fa047554-a718-44f0-80d3-dd3253696cbb"},{"edgeId":"4efb6c54-a7ce-4245-9272-27e21125864a","fromNodeId":"28d9a19d-6d01-40a3-b2a9-41203c4cd12b","name":"Other"},{"edgeId":"62adc790-bb20-4147-96c9-47c8fbd70403","fromNodeId":"fa047554-a718-44f0-80d3-dd3253696cbb","name":"Submitted","toNodeId":"4893962c-ddc7-471f-8eb1-4219323e4d3c"},{"edgeId":"8cd60edd-c41e-4890-b017-3a24e5990bc6","fromNodeId":"fa047554-a718-44f0-80d3-dd3253696cbb","name":"Other"},{"edgeId":"92ddc694-ee17-4123-a3b6-b7402ec3c768","fromNodeId":"28d9a19d-6d01-40a3-b2a9-41203c4cd12b","name":"Changes Requested","toNodeId":"755e3ace-d998-492e-958b-75bc33c5d153"},{"edgeId":"995b9e40-4026-437b-973d-7b7e974476bb","fromNodeId":"e35cb06b-598c-4d45-b123-7ef1de45d42a"},{"edgeId":"ac9ff8f7-ff41-4e31-9003-46ac0c0b59bc","fromNodeId":"28d9a19d-6d01-40a3-b2a9-41203c4cd12b","name":"Approved","toNodeId":"e35cb06b-598c-4d45-b123-7ef1de45d42a"},{"edgeId":"f6f5917c-4850-4cca-b92e-747d0411f619","fromNodeId":"58fa29c5-c26c-41e7-92d7-ac1646135f1f","toNodeId":"7a0d59db-0e73-4ad7-bee5-64f5e31b098f"},{"edgeId":"f7bc1e72-258c-4819-af4e-a60bf41f3168","fromNodeId":"4893962c-ddc7-471f-8eb1-4219323e4d3c","name":"Yes"}],"nodes":[{"nodeId":"28d9a19d-6d01-40a3-b2a9-41203c4cd12b"},{"nodeId":"4893962c-ddc7-471f-8eb1-4219323e4d3c"},{"nodeId":"58fa29c5-c26c-41e7-92d7-ac1646135f1f"},{"nodeId":"755e3ace-d998-492e-958b-75bc33c5d153"},{"nodeId":"7a0d59db-0e73-4ad7-bee5-64f5e31b098f"},{"nodeId":"be346a30-e38f-4c82-a443-f6e536ad666c"},{"nodeId":"e35cb06b-598c-4d45-b123-7ef1de45d42a"},{"nodeId":"fa047554-a718-44f0-80d3-dd3253696cbb"}]},"name":"Github Pull Request Review Events to Slack","notes":"","steps":[{"metadata":{"parameters":{"defaultEdgeId":"4efb6c54-a7ce-4245-9272-27e21125864a","stepControlParams":[{"edgeId":"4efb6c54-a7ce-4245-9272-27e21125864a","expression":{},"expressionText":""},{"edgeId":"92ddc694-ee17-4123-a3b6-b7402ec3c768","expression":{"left":{"name":"58fa29c5-c26c-41e7-92d7-ac1646135f1f.review.state","type":"variable"},"op":"=","right":{"type":"literal","value":"changes_requested"},"type":"binary"},"expressionText":"({{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[review].[state]}} = \"changes_requested\")"},{"edgeId":"ac9ff8f7-ff41-4e31-9003-46ac0c0b59bc","expression":{"left":{"name":"58fa29c5-c26c-41e7-92d7-ac1646135f1f.review.state","type":"variable"},"op":"=","right":{"type":"literal","value":"approved"},"type":"binary"},"expressionText":"({{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[review].[state]}} = \"approved\")"}]}},"name":"Review State","nodeId":"28d9a19d-6d01-40a3-b2a9-41203c4cd12b","type":"automated_decision"},{"metadata":{"parameters":{"defaultEdgeId":"0cdf1764-fccf-41d2-9a1a-5fcb5f027133","stepControlParams":[{"edgeId":"0cdf1764-fccf-41d2-9a1a-5fcb5f027133","expression":{},"expressionText":""},{"edgeId":"f7bc1e72-258c-4819-af4e-a60bf41f3168","expression":{"left":{"name":"58fa29c5-c26c-41e7-92d7-ac1646135f1f.pull_request.user.login","type":"variable"},"op":"=","right":{"name":"58fa29c5-c26c-41e7-92d7-ac1646135f1f.review.user.login","type":"variable"},"type":"binary"},"expressionText":"({{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[pull_request].[user].[login]}} = {{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[review].[user].[login]}})"}]}},"name":"Is Reviewer also Owner?","nodeId":"4893962c-ddc7-471f-8eb1-4219323e4d3c","type":"automated_decision"},{"description":"Github Pull Request Review Webhook -01","metadata":{"customOutputSchema":{"definitions":{"pull_request":{"properties":{"user":{"$ref":"#/definitions/pull_request_user"}},"type":"object"},"pull_request_user":{"properties":{"login":{"type":"string"}},"type":"object"},"requested_reviewer":{"properties":{"login":{"type":"string"}},"type":"object"},"review":{"properties":{"html_url":{"type":"string"},"state":{"type":"string"},"user":{"$ref":"#/definitions/user"}},"type":"object"},"user":{"properties":{"login":{"type":"string"}},"type":"object"}},"properties":{"action":{"type":"string"},"pull_request":{"$ref":"#/definitions/pull_request"},"requested_reviewer":{"$ref":"#/definitions/requested_reviewer"},"review":{"$ref":"#/definitions/review"}},"type":"object"}},"name":"Github Pull Request Review Webhook -01","nodeId":"58fa29c5-c26c-41e7-92d7-ac1646135f1f","type":"trigger_api"},{"metadata":{"appName":"slack","chatOpsConnectionId":"75148d45-ae7b-4f9d-9708-f743fed2eff9","continueOnFailure":false,"customOutputSchema":{"definitions":{},"properties":{"ChannelID of successful message":{"description":"ChannelID of successful message","order":1,"title":"Channel ID","type":"string"},"Timestamp of successful message":{"description":"Timestamp of successful message","order":2,"title":"Timestamp","type":"string"}},"title":"Variables","type":"object"},"identifier":"post_message","isDisabled":false,"parameters":{"input":{"attachments":[],"message":"@{{[be346a30-e38f-4c82-a443-f6e536ad666c].[pr_slack_user]}} - Changes requested by{{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[review].[user].[login]}} is up at {{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[review].[html_url]}}","recipient":"#komand-test"}}},"name":"Changes Requested","nodeId":"755e3ace-d998-492e-958b-75bc33c5d153","type":"action_chatops"},{"metadata":{"isDisabled":false,"parameters":{"input":{"content":"Action: {{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[action]}}\nReview State: {{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[review].[state]}}\nPR User: {{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[pull_request].[user].[login]}}\nReview User: {{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[review].[user].[login]}}\nReview URL: {{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[review].[html_url]}}"},"type":"markdown"}},"name":"Pull Request Review Summary","nodeId":"7a0d59db-0e73-4ad7-bee5-64f5e31b098f","type":"artifact"},{"metadata":{"continueOnFailure":false,"customOutputSchema":{"definitions":{},"properties":{"pr_slack_user":{"description":"Sample output result1 (delete or edit)","order":1,"title":"Result1","type":"string"},"review_slack_user":{"description":"Sample output result2 (delete or edit)","order":2,"title":"Result2","type":"string"}},"title":"Variables","type":"object"},"identifier":"run","isCloud":false,"isDisabled":false,"orchestratorId":"cb53cce3-61c8-468d-9dd5-f3ba0f08f05e","parameters":{"input":{"function":"def run(params={}):\n    return { 'review_slack_user': params.get('review_github_user').rstrip('-r7'), 'pr_slack_user': params.get('pr_github_user').rstrip('-r7') }","input":{"pr_github_user":"{{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[pull_request].[user].[login]}}","review_github_user":"{{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[review].[user].[login]}}"}}},"plugin":{"name":"python_2_script","vendor":"rapid7","version":"2.0.3"}},"name":"Strip -R7 from Github User","nodeId":"be346a30-e38f-4c82-a443-f6e536ad666c","type":"action"},{"metadata":{"appName":"slack","chatOpsConnectionId":"75148d45-ae7b-4f9d-9708-f743fed2eff9","continueOnFailure":false,"identifier":"post_message","isDisabled":false,"parameters":{"input":{"attachments":[],"message":":approved: @{{[be346a30-e38f-4c82-a443-f6e536ad666c].[pr_slack_user]}} - Approved by {{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[review].[user].[login]}} for {{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[review].[html_url]}}","recipient":"#komand-test"}}},"name":"Post Approved Message","nodeId":"e35cb06b-598c-4d45-b123-7ef1de45d42a","type":"action_chatops"},{"metadata":{"parameters":{"defaultEdgeId":"8cd60edd-c41e-4890-b017-3a24e5990bc6","stepControlParams":[{"edgeId":"62adc790-bb20-4147-96c9-47c8fbd70403","expression":{"left":{"left":{"name":"58fa29c5-c26c-41e7-92d7-ac1646135f1f.action","type":"variable"},"op":"=","right":{"type":"literal","value":"submitted"},"type":"binary"},"op":"OR","right":{"left":{"name":"58fa29c5-c26c-41e7-92d7-ac1646135f1f.action","type":"variable"},"op":"=","right":{"type":"literal","value":"edited"},"type":"binary"},"type":"binary"},"expressionText":"({{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[action]}} = \"submitted\" OR {{[58fa29c5-c26c-41e7-92d7-ac1646135f1f].[action]}} = \"edited\")"},{"edgeId":"8cd60edd-c41e-4890-b017-3a24e5990bc6","expression":{},"expressionText":""}]}},"name":"Action Type","nodeId":"fa047554-a718-44f0-80d3-dd3253696cbb","type":"automated_decision"}],"summary":"","tags":[],"timeSavingsDisplayUnit":"minutes","timeSavingsSeconds":2400}}